<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Live Party Results - Admin Dashboard</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéâ</text></svg>">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
    
    body {
      font-family: 'Inter', sans-serif;
      overflow: hidden;
    }
    
    .gradient-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .glass-card {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .vote-bar {
      transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .pulse-glow {
      animation: pulse-glow 2s infinite;
    }
    
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 20px rgba(59, 130, 246, 0.5); }
      50% { box-shadow: 0 0 40px rgba(59, 130, 246, 0.8); }
    }
    
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      background: #fbbf24;
      animation: confetti-fall 3s linear infinite;
    }
    
    @keyframes confetti-fall {
      0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }
    
    .reveal-animation {
      animation: reveal-bounce 0.6s ease-out;
    }
    
    @keyframes reveal-bounce {
      0% { transform: scale(0.3); opacity: 0; }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); opacity: 1; }
    }
  </style>
</head>
<body class="gradient-bg min-h-screen">
  <!-- Header -->
  <header class="fixed top-0 left-0 right-0 z-50 p-6">
    <div class="flex justify-between items-center">
      <div class="flex items-center space-x-4">
        <h1 class="text-4xl font-black text-white">üéâ LIVE PARTY</h1>
        <div class="text-white text-lg font-medium">
          <span id="totalVotes">0</span> votes cast
        </div>
      </div>
      <div class="flex items-center space-x-4">
        <div class="text-white text-right">
          <div class="text-sm opacity-80">Language</div>
          <div class="flex space-x-2">
            <button data-lang="en" class="lang-btn px-3 py-1 rounded-full font-bold bg-white bg-opacity-20 text-white hover:bg-opacity-30 transition-all">EN</button>
            <button data-lang="zh" class="lang-btn px-3 py-1 rounded-full font-bold bg-white bg-opacity-20 text-white hover:bg-opacity-30 transition-all">ÁπÅÈ´î</button>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="pt-32 px-8 pb-8 h-screen flex flex-col">
    <div class="grid grid-cols-12 gap-8 h-full">
      
      <!-- Left Column - Vote Results -->
      <div class="col-span-8 space-y-8">
        
        <!-- Vote Bars Section -->
        <div class="glass-card rounded-3xl p-8">
          <h2 class="text-3xl font-bold text-white mb-8 text-center" data-i18n="liveResults">LIVE VOTE RESULTS</h2>
          
          <div class="space-y-6">
            <!-- Boy Vote Bar -->
            <div class="space-y-3">
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                  <span class="text-6xl">üë∂</span>
                  <span class="text-2xl font-bold text-white" data-i18n="boy">BOY</span>
                </div>
                <div class="text-right">
                  <div id="boyCount" class="text-4xl font-black text-blue-200">0</div>
                  <div id="boyPercentage" class="text-lg text-blue-300">0%</div>
                </div>
              </div>
              <div class="w-full bg-white bg-opacity-20 rounded-full h-8 overflow-hidden">
                <div id="boyBar" class="vote-bar bg-gradient-to-r from-blue-400 to-blue-600 h-8 rounded-full" style="width: 0%"></div>
              </div>
            </div>
            
            <!-- Girl Vote Bar -->
            <div class="space-y-3">
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                  <span class="text-6xl">üëß</span>
                  <span class="text-2xl font-bold text-white" data-i18n="girl">GIRL</span>
                </div>
                <div class="text-right">
                  <div id="girlCount" class="text-4xl font-black text-pink-200">0</div>
                  <div id="girlPercentage" class="text-lg text-pink-300">0%</div>
                </div>
              </div>
              <div class="w-full bg-white bg-opacity-20 rounded-full h-8 overflow-hidden">
                <div id="girlBar" class="vote-bar bg-gradient-to-r from-pink-400 to-pink-600 h-8 rounded-full" style="width: 0%"></div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Recent Votes Section -->
        <div class="glass-card rounded-3xl p-8">
          <h3 class="text-2xl font-bold text-white mb-6" data-i18n="recentVotes">Recent Votes</h3>
          <div id="recentVotesList" class="space-y-3 max-h-64 overflow-y-auto">
            <!-- Recent votes will be populated here -->
          </div>
        </div>
      </div>
      
      <!-- Right Column - Controls & Guest List -->
      <div class="col-span-4 space-y-8">
        
        <!-- Admin Controls -->
        <div class="glass-card rounded-3xl p-6">
          <h3 class="text-2xl font-bold text-white mb-6">Admin Controls</h3>
          
          <div class="space-y-4">
            <button id="revealGenderBtn" class="w-full bg-gradient-to-r from-yellow-400 to-yellow-600 hover:from-yellow-500 hover:to-yellow-700 text-white font-bold py-4 px-6 rounded-2xl text-xl transition-all transform hover:scale-105 pulse-glow" data-i18n="revealGender">
              üéä REVEAL GENDER üéä
            </button>
            
            <div id="revealSection" class="hidden space-y-3">
              <p class="text-white font-semibold text-center" data-i18n="selectActual">Select the actual gender:</p>
              <div class="grid grid-cols-2 gap-3">
                <button id="actualBoyBtn" class="bg-gradient-to-r from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800 text-white font-bold py-3 px-4 rounded-xl transition-all transform hover:scale-105" data-i18n="boy">
                  üë∂ Boy
                </button>
                <button id="actualGirlBtn" class="bg-gradient-to-r from-pink-500 to-pink-700 hover:from-pink-600 hover:to-pink-800 text-white font-bold py-3 px-4 rounded-xl transition-all transform hover:scale-105" data-i18n="girl">
                  üëß Girl
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Guest List -->
        <div class="glass-card rounded-3xl p-6 flex-1">
          <h3 class="text-2xl font-bold text-white mb-6" data-i18n="guestVotes">Guest Votes</h3>
          <div id="guestList" class="space-y-2 max-h-96 overflow-y-auto">
            <!-- Guest votes will be populated here -->
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Reveal Overlay -->
  <div id="revealOverlay" class="fixed inset-0 bg-black bg-opacity-90 hidden z-50 flex items-center justify-center">
    <div class="text-center">
      <div id="revealMsg" class="text-8xl font-black mb-8 reveal-animation"></div>
      <div id="winnerEmojis" class="text-9xl mb-8 reveal-animation"></div>
      <div class="grid grid-cols-2 gap-8 text-2xl">
        <div id="rightList" class="text-green-400"></div>
        <div id="wrongList" class="text-red-400"></div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script type="module" src="../../config/firebaseConfig.js"></script>
  <script type="module" src="../../js/result.js"></script>
  <script type="module">
    import { TRANSLATIONS } from '../../config/translations.js';
    
    // Language switching logic
    const langBtns = document.querySelectorAll('.lang-btn');
    const i18nEls = document.querySelectorAll('[data-i18n]');
    
    function setLang(lang) {
      localStorage.setItem('lang', lang);
      const t = TRANSLATIONS[lang] || TRANSLATIONS['en'];
      i18nEls.forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (t[key]) el.innerHTML = t[key];
      });
      langBtns.forEach(btn => {
        if (btn.getAttribute('data-lang') === lang) {
          btn.classList.add('bg-opacity-40', 'ring-2', 'ring-white');
        } else {
          btn.classList.remove('bg-opacity-40', 'ring-2', 'ring-white');
        }
      });
    }
    
    langBtns.forEach(btn => {
      btn.addEventListener('click', () => setLang(btn.getAttribute('data-lang')));
    });
    
    setLang(localStorage.getItem('lang') || 'en');
    
    // Create confetti effect
    function createConfetti() {
      for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + 'vw';
        confetti.style.animationDelay = Math.random() * 3 + 's';
        confetti.style.backgroundColor = ['#fbbf24', '#ef4444', '#3b82f6', '#10b981', '#8b5cf6'][Math.floor(Math.random() * 5)];
        document.body.appendChild(confetti);
        
        setTimeout(() => {
          confetti.remove();
        }, 3000);
      }
    }
    
    // Expose confetti function globally
    window.createConfetti = createConfetti;
  </script>
</body>
</html> 